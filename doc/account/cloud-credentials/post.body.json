{"body": "<div id=\"operation-contents\" class=\"content\">\n\n  <div id=\"auth-window\" style=\"display:none;\">\n    <div id=\"creds-window\">\n      <div id=\"close-button\">\n        <a href=\"#\" id=\"auth-window-close\">\n          <img src=\"/images/close-login-retina.png\" width=\"20px\" height=\"20px\" />\n        </a>\n      </div>\n      <h1>API Credentials</h1>\n      <h2>Scalr API authentication</h2>\n      <form>\n        <label for=\"auth-server\">\n        <span class=\"auth-label\">Server</span>\n        <input required id=\"auth-server\" class=\"auth-input\" name=\"server\" value=\"https://my.scalr.com/\" type=\"text\"/>\n        </label>\n        <br/>\n        <label for=\"auth-keyid\">\n        <span class=\"auth-label\">API Key ID</span>\n        <input required id=\"auth-keyid\" class=\"auth-input\" name=\"keyid\" placeholder=\"Required\" value=\"\" type=\"text\"/>\n        </label>\n        <br/>\n        <label for=\"auth-secret\">\n        <span class=\"auth-label\">Secret</span>\n        <input required id=\"auth-secret\" class=\"auth-input\" name=\"secret\" placeholder=\"Required\" value=\"\" type=\"password\"/>\n        </label>\n        <br/>\n        <div id=\"button-container\">\n          <button type=\"button\" class=\"auth-button\" id=\"auth-button-done\" style=\"width: 18%;\">Done</button><!-- get rid of spacing\n       --><button type=\"button\" class=\"auth-button store-dependant\" id=\"auth-button-save\" style=\"width: 39%;\">Save credentials locally</button><!--\n       --><button type=\"button\" class=\"auth-button store-dependant\" id=\"auth-button-unsave\" style=\"width: 39%;\">Delete saved credentials</button>\n        </div>\n      </form>\n    </div>\n  </div>\n\n  <div>\n  <h1>Cloud Credentials: Create</h1>\n\n\n  <h2>Description</h2>\n  <p><p>Create new Cloud Credentials at this Account's scope.</p></p>\n\n  <h2>HTTP Request</h2>\n  <pre><code class=\"nohighlight\">POST /api/v1beta0/account/cloud-credentials/</code></pre>\n\n  <h2>Parameters</h2>\n  <p>This endpoint does not take any parameters.</p>\n\n  <h2>Request body</h2>\n  <div class='request-body'>\n      <p><p>The JSON representation of a CloudCredentials object.</p></p>\n        <p><a target=\"_blank\" href=\"/definitions/C/CloudCredentials.html\">CloudCredentials</a> is an abstract type, you need to provide an object of a concrete type implementing it:\n           <ul class=\"concrete-types-list\">\n               <li><a target=\"_blank\" href=\"/definitions/A/AwsCloudCredentials.html\">AwsCloudCredentials</a></li>\n               <li><a target=\"_blank\" href=\"/definitions/C/CloudstackCloudCredentials.html\">CloudstackCloudCredentials</a></li>\n               <li><a target=\"_blank\" href=\"/definitions/G/GceCloudCredentials.html\">GceCloudCredentials</a></li>\n               <li><a target=\"_blank\" href=\"/definitions/O/OpenstackCloudCredentials.html\">OpenstackCloudCredentials</a></li>\n               <li><a target=\"_blank\" href=\"/definitions/R/RackspaceCloudCredentials.html\">RackspaceCloudCredentials</a></li>\n               <li><a target=\"_blank\" href=\"/definitions/A/AzureCloudCredentials.html\">AzureCloudCredentials</a></li>\n           </ul>\n        </p>\n  </div>\n\n    <div class=\"response-class\">\n      <h2>Successful Response (Status 201)</h2>\n<p><p>The JSON representation of a CloudCredentials object.</p></p>        <p>The API replies with a <a target=\"_blank\" href=\"/definitions/C/CloudCredentialsDetailsResponse.html\">CloudCredentialsDetailsResponse</a> object. Example response body:\n        <div class=\"json\">\n          <pre><code>{\n  \"data\": {\n    \"cloudCredentialsType\": \"AwsCloudCredentials\", \n    \"description\": \"string\", \n    \"id\": \"string\", \n    \"name\": \"string\", \n    \"provider\": \"string\", \n    \"scope\": \"scalr\", \n    \"status\": \"disabled\"\n  }, \n  \"errors\": [\n    {\n      \"code\": \"string\", \n      \"message\": \"string\"\n    }\n  ], \n  \"meta\": {\n    \"sample\": \"string\"\n  }, \n  \"warnings\": [\n    {\n      \"code\": \"string\", \n      \"message\": \"string\"\n    }\n  ]\n}</code></pre>\n        </div>\n        </p>\n    </div>\n\n  <h2>Other Response Messages</h2>\n  <table class=\"fullwidth\">\n    <thead>\n    <tr>\n      <th>HTTP Status Code</th>\n      <th>Reason</th>\n      <th>Response Model</th>\n    </tr>\n    </thead>\n    <tbody class=\"operation-status\">\n    <tr>\n      <td width='15%' class='code'>400</td>\n      <td width='50%' class=\"markdown\"><p>A client-side error was made.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>401</td>\n      <td width='50%' class=\"markdown\"><p>The request was not authenticated.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>403</td>\n      <td width='50%' class=\"markdown\"><p>Insufficient permissions.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>404</td>\n      <td width='50%' class=\"markdown\"><p>Resource not found.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>409</td>\n      <td width='50%' class=\"markdown\"><p>Conflict with current state.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>422</td>\n      <td width='50%' class=\"markdown\"><p>This request was well-formed but was rejected due to semantic errors.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>500</td>\n      <td width='50%' class=\"markdown\"><p>A server-side error occured.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>501</td>\n      <td width='50%' class=\"markdown\"><p>This feature is not implemented in Scalr.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    <tr>\n      <td width='15%' class='code'>503</td>\n      <td width='50%' class=\"markdown\"><p>The service is currently unavailable.</p></td>\n      <td>An <a target=\"_blank\" href=\"/definitions/A/ApiErrorResponse.html\">ApiErrorResponse</a> object</td>\n    </tr>\n    </tbody>\n  </table>\n\n  <h2>Try it out!</h2>\n  <form accept-charset='UTF-8' class='sandbox'>\n    <div style='margin:0;padding:0;display:inline'></div>\n\n    <table class='fullwidth'>\n    <thead>\n      <tr>\n      <th>Parameter</th>\n      <th>Value</th>\n      <th>Description</th>\n      </tr>\n    </thead>\n    <tbody class=\"operation-params\">\n    <tr>\n        <td>body<br/>\n          </span>\n        </td>\n        <td>\n            <label for=\"bodyTypeSelect\">Type:</label>\n            <select name=\"bodyType\" id=\"bodyTypeSelect\" class=\"body-type-selector\">\n              <option value=\"AwsCloudCredentials\">AwsCloudCredentials</option>\n              <option value=\"CloudstackCloudCredentials\">CloudstackCloudCredentials</option>\n              <option value=\"GceCloudCredentials\">GceCloudCredentials</option>\n              <option value=\"OpenstackCloudCredentials\">OpenstackCloudCredentials</option>\n              <option value=\"RackspaceCloudCredentials\">RackspaceCloudCredentials</option>\n              <option value=\"AzureCloudCredentials\">AzureCloudCredentials</option>\n            </select> - <span id=\"body-type-def\">Definition</span><br/>\n            <textarea name=\"body\" id=\"body\" class=\"required\"></textarea>\n        </td>\n\n        <td><p>The JSON representation of a <a target=\"_blank\" href=\"/definitions/C/CloudCredentials.html\">CloudCredentials</a> object.</p></td>\n    </tr>\n    </tbody>\n    </table>\n    <div class=\"execute-btn\">\n      <input id=\"submit\" class='submit' type='submit' value='Authorize and execute'/>\n    </div>\n    <div class=\"execute-btn\">\n      <input id=\"auth-container\" class='submit' type=\"submit\" value='Change credentials'/>\n    </div>\n    <div class=\"clear\"></div>\n  </form>\n\n  <div class='response' style='display:none'>\n    <a href='#' class='response_hider' style='display:none'>Hide Response</a>\n    <h2>Request URL</h2>\n    <pre><code id=\"request-url\" class='block request_url'></code></pre>\n    <h2>Request Headers</h2>\n    <pre><code id=\"request-headers\" class='block request_headers'></code></pre>\n    <h2>Response Body</h2>\n    <pre><code id=\"response-body\" class='block response_body json'></code></pre>\n    <h2>Response Code</h2>\n    <pre><code id=\"response-code\" class='block response_code'></code></pre>\n  </div>\n\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n$(function () {\n  // API interaction\n  var headerRepresentation = function(headers) {\n    resultString = \"\";\n    for (var h in headers) {\n      resultString += h + \": \" + headers[h] + \"\\n\";\n    }\n    return resultString;\n  };\n\n  var onOpSuccess = function(data, status, xhr) {\n    $('.response').show();\n    $('#request-url').html(this.url);\n    $('#request-headers').html(headerRepresentation(this.headers));\n    if (xhr.responseText) {\n      $('#response-body').html(JSON.stringify(JSON.parse(xhr.responseText),null,2));\n    }\n    $('#response-code').html(xhr.status + ' (success)');\n    hljs.highlightBlock(document.getElementById('response-body'));\n  };\n\n  var onOpError = function(xhr, status, error) {\n    $('.response').show();\n    $('#request-url').html(this.url);\n    $('#request-headers').html(headerRepresentation(this.headers));\n    if (xhr.responseText) {\n      $('#response-body').html(JSON.stringify(JSON.parse(xhr.responseText),null,2));\n      hljs.highlightBlock(document.getElementById('response-body'));\n    } else {\n      $('#response-body').html('No data was returned by Scalr.\\n\\nThis may happen if the preflight request doesn\\'t succeed.\\nPlease check that you can reach Scalr, that the API is enabled,\\nthat \\'https://api-explorer.scalr.com\\' is in the list of allowed origins for the Scalr API (see the Getting Started page for more details)\\nand that your credentials and parameters are correct.');\n    }\n    $('#response-code').html(xhr.status);\n  }\n\n  var bodyEditor = CodeMirror.fromTextArea(document.getElementById(\"body\"), {\n    mode: {name: \"javascript\", json: true},\n    viewportMargin: Infinity\n  });\n\n  var submitWhenAuthDone = false;\n\n  var submitOperation = function(e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (!areCredentialsValid()) {\n      submitWhenAuthDone = true;\n      showAuthWindow();\n      return;\n    }\n\n    var invalid = false;\n          if (!bodyEditor.getValue()) {\n            $('.CodeMirror').addClass('invalid');\n            invalid = true;\n          }\n    if (invalid) {\n      return;\n    }\n\n    $('.respons_throbber').show();\n    hideResponse();\n    var path = '/api/v1beta0/account/cloud-credentials/';\n    var params = {};\n\n    var body = bodyEditor.getValue();\n\n    console.log(path, params , body  );\n\n      ScalrAPI.create(path, body, params, onOpSuccess, onOpError);\n  };\n\n  // Credentials handling\n\n  $.ajaxSetup({\n    contentType: \"application/json; charset=utf-8\",\n    dataType:\"json\",\n  });\n\n  // Default values\n  var apiSettings = {\n    apiUrl: 'https://my.scalr.com',\n    keyId: '',\n    secretKey: ''\n  };\n\n  //Load settings if they are stored\n  if (store.enabled) {\n    if (store.get('auth-scalr-server')) {\n        apiSettings.apiUrl = store.get('auth-scalr-server');\n        if (apiSettings.apiUrl.endsWith('/')) {\n          apiSettings.apiUrl = apiSettings.apiUrl.substring(0, apiSettings.apiUrl.length - 1);\n        }\n    }   \n    if (store.get('auth-scalr-keyid')) {\n        apiSettings.keyId = store.get('auth-scalr-keyid');\n    }\n    if (store.get('auth-scalr-secret')) {\n        apiSettings.secretKey = store.get('auth-scalr-secret');\n    }\n  }\n\n  var areCredentialsValid = function() {\n    return apiSettings.apiUrl.length > 0 && apiSettings.keyId.length > 0 && apiSettings.secretKey.length > 0;\n  }\n\n  ScalrAPI.setSettings(apiSettings);\n\n  showAuthWindow = function(e) {\n    $(\"#auth-server\").val(apiSettings.apiUrl); \n    $(\"#auth-keyid\").val(apiSettings.keyId);\n    $(\"#auth-secret\").val(apiSettings.secretKey);\n    $(\"#auth-window\").show();\n    if (e) {\n      e.preventDefault();\n    }\n  };\n\n  closeAuthWindow = function() {\n    $(\"#auth-window\").hide();\n  };\n\n  applyCredentials = function() {\n    apiSettings.apiUrl = $(\"#auth-server\").val(); \n    apiSettings.keyId = $(\"#auth-keyid\").val();\n    apiSettings.secretKey = $(\"#auth-secret\").val();\n    if (apiSettings.apiUrl.endsWith('/')) {\n      apiSettings.apiUrl = apiSettings.apiUrl.substring(0, apiSettings.apiUrl.length - 1);\n    }\n    closeAuthWindow();\n    if (submitWhenAuthDone) {\n      submitWhenAuthDone = false;\n      submitOperation();\n    }\n  };\n\n  saveAndApplyCredentials = function() {\n    applyCredentials();\n    if (store.enabled) {\n      store.set('auth-scalr-server', apiSettings.apiUrl);\n      store.set('auth-scalr-keyid', apiSettings.keyId);\n      store.set('auth-scalr-secret', apiSettings.secretKey);\n    }\n  };\n\n  deleteSavedCredentials = function() {\n    if (store.enabled) {\n      store.remove('auth-scalr-server');\n      store.remove('auth-scalr-keyid');\n      store.remove('auth-scalr-secret');\n    }\n  };\n\n  // Events bindings \n  $(\"#auth-container\").click(showAuthWindow);\n  $(\"#auth-window-close\").click(closeAuthWindow);\n  $(\"#auth-button-done\").click(applyCredentials);\n  if (store.enabled) {\n    $(\"#auth-button-save\").click(saveAndApplyCredentials);\n    $(\"#auth-button-unsave\").click(deleteSavedCredentials);\n  } else {\n    var buttons = $(\".store-dependant\");\n    buttons.addClass(\"disabled\");\n    for (var i = 0; i < buttons.length; i ++) {\n      new Tooltip({\n          target: buttons[i],\n          content: \"Local Storage is not enabled on your browser.<br/>Please switch to a more recent browser to use this functionality.\",\n          classes: 'tooltip-theme-arrows',\n          position: 'top left'\n        });\n    }\n  }\n\n  var hideResponse = function() {\n    $('.response').hide();\n  };\n\n  $('.response_hider').click(hideResponse);\n  $('#submit').click(submitOperation);\n\n  $('input').keyup(function(e) {\n    $(this).removeClass('invalid');\n  });\n\n  $('.CodeMirror').keyup(function(e) {\n    $(this).removeClass('invalid');\n  });\n\n  \n  var bodyTypes = {\"AwsCloudCredentials\":{\"link\":\"<a target=\\\"_blank\\\" href=\\\"/definitions/A/AwsCloudCredentials.html\\\">Definition</a>\",\"sampleJSON\":\"{\\n  \\\"accessKey\\\": \\\"string\\\", \\n  \\\"accountType\\\": \\\"regular\\\", \\n  \\\"billing\\\": {\\n    \\\"bucket\\\": \\\"string\\\", \\n    \\\"cloudLocation\\\": \\\"string\\\", \\n    \\\"payerAccount\\\": \\\"string\\\"\\n  }, \\n  \\\"cloudCredentialsType\\\": \\\"AwsCloudCredentials\\\", \\n  \\\"description\\\": \\\"string\\\", \\n  \\\"name\\\": \\\"string\\\", \\n  \\\"provider\\\": \\\"string\\\", \\n  \\\"secretKey\\\": \\\"string\\\"\\n}\"},\"CloudstackCloudCredentials\":{\"link\":\"<a target=\\\"_blank\\\" href=\\\"/definitions/C/CloudstackCloudCredentials.html\\\">Definition</a>\",\"sampleJSON\":\"{\\n  \\\"apiKey\\\": \\\"string\\\", \\n  \\\"apiUrl\\\": \\\"string\\\", \\n  \\\"cloudCredentialsType\\\": \\\"CloudstackCloudCredentials\\\", \\n  \\\"description\\\": \\\"string\\\", \\n  \\\"name\\\": \\\"string\\\", \\n  \\\"provider\\\": \\\"cloudstack\\\", \\n  \\\"secretKey\\\": \\\"string\\\"\\n}\"},\"GceCloudCredentials\":{\"link\":\"<a target=\\\"_blank\\\" href=\\\"/definitions/G/GceCloudCredentials.html\\\">Definition</a>\",\"sampleJSON\":\"{\\n  \\\"accountName\\\": \\\"string\\\", \\n  \\\"clientId\\\": \\\"string\\\", \\n  \\\"cloudCredentialsType\\\": \\\"GceCloudCredentials\\\", \\n  \\\"description\\\": \\\"string\\\", \\n  \\\"name\\\": \\\"string\\\", \\n  \\\"privateKey\\\": \\\"base64+encoded+data==\\\", \\n  \\\"projectId\\\": \\\"string\\\", \\n  \\\"provider\\\": \\\"string\\\"\\n}\"},\"OpenstackCloudCredentials\":{\"link\":\"<a target=\\\"_blank\\\" href=\\\"/definitions/O/OpenstackCloudCredentials.html\\\">Definition</a>\",\"sampleJSON\":\"{\\n  \\\"cloudCredentialsType\\\": \\\"OpenstackCloudCredentials\\\", \\n  \\\"description\\\": \\\"string\\\", \\n  \\\"domainName\\\": \\\"string\\\", \\n  \\\"keystoneUrl\\\": \\\"string\\\", \\n  \\\"name\\\": \\\"string\\\", \\n  \\\"password\\\": \\\"string\\\", \\n  \\\"provider\\\": \\\"openstack\\\", \\n  \\\"sslVerification\\\": true, \\n  \\\"tenantName\\\": \\\"string\\\", \\n  \\\"userName\\\": \\\"string\\\"\\n}\"},\"RackspaceCloudCredentials\":{\"link\":\"<a target=\\\"_blank\\\" href=\\\"/definitions/R/RackspaceCloudCredentials.html\\\">Definition</a>\",\"sampleJSON\":\"{\\n  \\\"apiKey\\\": \\\"string\\\", \\n  \\\"cloudCredentialsType\\\": \\\"RackspaceCloudCredentials\\\", \\n  \\\"description\\\": \\\"string\\\", \\n  \\\"isUk\\\": true, \\n  \\\"name\\\": \\\"string\\\", \\n  \\\"provider\\\": \\\"string\\\", \\n  \\\"userName\\\": \\\"string\\\"\\n}\"},\"AzureCloudCredentials\":{\"link\":\"<a target=\\\"_blank\\\" href=\\\"/definitions/A/AzureCloudCredentials.html\\\">Definition</a>\",\"sampleJSON\":\"{\\n  \\\"cloudCredentialsType\\\": \\\"AzureCloudCredentials\\\", \\n  \\\"description\\\": \\\"string\\\", \\n  \\\"name\\\": \\\"string\\\", \\n  \\\"provider\\\": \\\"string\\\", \\n  \\\"subscription\\\": \\\"string\\\", \\n  \\\"tenantName\\\": \\\"string\\\"\\n}\"}};\n\n  $('#bodyTypeSelect').change(function(e) {\n    bodyEditor.setValue(bodyTypes[$('#bodyTypeSelect').val()].sampleJSON);\n    $('#body-type-def').html(bodyTypes[$('#bodyTypeSelect').val()].link);\n  });\n  $('#bodyTypeSelect').change();\n\n\n  // Inputs size adaptation\n  var resizeInputs = function() {\n    var w = $(\"#operation-contents\").width();\n    if (w > 800) {\n      $(\".main .CodeMirror\").width(w / 2);\n      $(\".main .content input.operation-arg\").width(w / 2);\n    } else {\n      $(\".main .CodeMirror\").width(400);\n      $(\".main .content input.operation-arg\").width(400);\n    }\n  }\n\n  // Only on page load\n  resizeInputs();\n\n});\n</script>\n", "title": "Cloud Credentials: Create - Scalr API Documentation"}